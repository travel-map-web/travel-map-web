<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>💕 我们的旅行地图 - 甜蜜回忆录</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gradient-to-br from-pink-50 via-blue-50 to-purple-50 min-h-screen font-sans">
    <!-- 顶部标题区域 -->
    <header class="relative overflow-hidden min-h-[60vh] lg:min-h-[70vh] flex items-center justify-center">
        <!-- 动态背景层 -->
        <div class="absolute inset-0">
            <!-- 主背景渐变 -->
            <div class="absolute inset-0 bg-gradient-to-br from-pink-100 via-blue-50 to-purple-100"></div>
            <!-- 动态光效 -->
            <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-shimmer"></div>
            <!-- 几何装饰 -->
            <div class="absolute top-0 left-0 w-full h-full">
                <div class="geometric-bg"></div>
            </div>
        </div>

        <!-- 主要内容 -->
        <div class="relative z-20 container mx-auto px-4 sm:px-6 lg:px-8 text-center max-w-6xl">
            <!-- 标题组 -->
            <div class="header-content space-y-6 lg:space-y-8">
                <!-- 副标题 -->
                <div class="subtitle-wrapper">
                    <span class="subtitle inline-block text-sm sm:text-base font-medium text-gray-600 tracking-wider uppercase">
                        ✨ Our Journey Together ✨
                    </span>
                </div>
                
                <!-- 主标题 -->
                <h1 class="main-title text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold">
                    <span class="title-icon text-3xl sm:text-4xl md:text-5xl lg:text-6xl">💕</span>
                    <span class="title-text bg-gradient-to-r from-pink-500 via-blue-500 to-purple-500 bg-clip-text text-transparent">
                        我们的旅行地图
                    </span>
                    <span class="title-icon text-3xl sm:text-4xl md:text-5xl lg:text-6xl">💕</span>
                </h1>
                
                <!-- 描述文字 -->
                <p class="description text-lg sm:text-xl lg:text-2xl text-gray-600 max-w-2xl mx-auto leading-relaxed">
                    记录每一个甜蜜的足迹，珍藏每一份美好的回忆
                </p>

                <!-- 装饰性统计信息 -->
                <div class="header-stats flex items-center justify-center gap-1 sm:gap-2 md:gap-3 lg:gap-4 xl:gap-6 mt-8 lg:mt-12 px-2">
                    <div class="stat-item flex items-center gap-1 sm:gap-2 px-2 py-2 sm:px-3 sm:py-2 md:px-4 md:py-3 lg:px-6 lg:py-3 bg-white/70 backdrop-blur-sm rounded-full border border-white/30 shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 flex-shrink-0">
                        <span class="stat-icon text-base sm:text-lg md:text-xl">🌍</span>
                        <span class="stat-text text-xs sm:text-sm md:text-base font-semibold text-gray-700 whitespace-nowrap">探索世界</span>
                    </div>
                    <div class="stat-divider text-gray-400 text-sm sm:text-base md:text-lg font-bold flex-shrink-0">•</div>
                    <div class="stat-item flex items-center gap-1 sm:gap-2 px-2 py-2 sm:px-3 sm:py-2 md:px-4 md:py-3 lg:px-6 lg:py-3 bg-white/70 backdrop-blur-sm rounded-full border border-white/30 shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 flex-shrink-0">
                        <span class="stat-icon text-base sm:text-lg md:text-xl">💝</span>
                        <span class="stat-text text-xs sm:text-sm md:text-base font-semibold text-gray-700 whitespace-nowrap">收集回忆</span>
                    </div>
                    <div class="stat-divider text-gray-400 text-sm sm:text-base md:text-lg font-bold flex-shrink-0">•</div>
                    <div class="stat-item flex items-center gap-1 sm:gap-2 px-2 py-2 sm:px-3 sm:py-2 md:px-4 md:py-3 lg:px-6 lg:py-3 bg-white/70 backdrop-blur-sm rounded-full border border-white/30 shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 flex-shrink-0">
                        <span class="stat-icon text-base sm:text-lg md:text-xl">🌸</span>
                        <span class="stat-text text-xs sm:text-sm md:text-base font-semibold text-gray-700 whitespace-nowrap">甜蜜时光</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 浮动装饰元素 -->
        <div class="floating-decorations">
            <div class="floating-item floating-item-1">
                <span class="decoration-emoji">☁️</span>
            </div>
            <div class="floating-item floating-item-2">
                <span class="decoration-emoji">🌙</span>
            </div>
            <div class="floating-item floating-item-3">
                <span class="decoration-emoji">⭐</span>
            </div>
            <div class="floating-item floating-item-4">
                <span class="decoration-emoji">🌸</span>
            </div>
            <div class="floating-item floating-item-5">
                <span class="decoration-emoji">💫</span>
            </div>
            <div class="floating-item floating-item-6">
                <span class="decoration-emoji">🦋</span>
            </div>
        </div>

        <!-- 底部波浪装饰 -->
        <div class="header-wave">
            <svg viewBox="0 0 1200 120" preserveAspectRatio="none">
                <path d="M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z" opacity=".25" class="shape-fill"></path>
                <path d="M0,0V15.81C13,36.92,27.64,56.86,47.69,72.05,99.41,111.27,165,111,224.58,91.58c31.15-10.15,60.09-26.07,89.67-39.8,40.92-19,84.73-46,130.83-49.67,36.26-2.85,70.9,9.42,98.6,31.56,31.77,25.39,62.32,62,103.63,73,40.44,10.79,81.35-6.69,119.13-24.28s75.16-39,116.92-43.05c59.73-5.85,113.28,22.88,168.9,38.84,30.2,8.66,59,6.17,87.09-7.5,22.43-10.89,48-26.93,60.65-49.24V0Z" opacity=".5" class="shape-fill"></path>
                <path d="M0,0V5.63C149.93,59,314.09,71.32,475.83,42.57c43-7.64,84.23-20.12,127.61-26.46,59-8.63,112.48,12.24,165.56,35.4C827.93,77.22,886,95.24,951.2,90c86.53-7,172.46-45.71,248.8-84.81V0Z" class="shape-fill"></path>
            </svg>
        </div>
    </header>

    <!-- 地图容器 -->
    <main class="container mx-auto px-4 sm:px-6 lg:px-8 pb-8 lg:pb-12 max-w-7xl">
        <div class="bg-white rounded-2xl lg:rounded-3xl shadow-2xl overflow-hidden border-2 lg:border-4 border-pink-200 relative transform hover:scale-[1.01] transition-transform duration-300">
            <!-- 地图区域 -->
            <div id="map" class="h-80 sm:h-96 md:h-[500px] lg:h-[600px] xl:h-[700px] relative">
                <!-- 加载动画 -->
                <div id="loading" class="absolute inset-0 flex items-center justify-center bg-gradient-to-br from-pink-50 to-blue-50 z-50">
                    <div class="text-center p-6">
                        <div class="animate-spin text-4xl sm:text-5xl lg:text-6xl mb-4">🌍</div>
                        <p class="text-base sm:text-lg lg:text-xl text-gray-600 font-medium">正在加载我们的回忆...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 统计信息卡片 -->
        <div class="mt-6 lg:mt-8 grid grid-cols-3 gap-2 sm:gap-4 lg:gap-6">
            <div class="stats-card clickable-card group bg-white rounded-lg sm:rounded-xl lg:rounded-2xl p-3 sm:p-6 lg:p-8 shadow-lg hover:shadow-2xl border border-pink-100 hover:border-pink-300 transition-all duration-300 cursor-pointer transform hover:-translate-y-2" id="cityStatsCard" title="点击查看所有城市">
                <div class="text-center space-y-1 sm:space-y-3">
                    <div class="text-xl sm:text-3xl lg:text-4xl group-hover:scale-110 transition-transform duration-300">🏙️</div>
                    <div class="text-lg sm:text-2xl lg:text-3xl font-bold text-pink-600 group-hover:text-pink-700" id="cityCount">0</div>
                    <div class="text-gray-600 text-xs sm:text-sm lg:text-base font-medium">个城市</div>
                    <div class="click-hint text-xs lg:text-sm text-pink-500 opacity-0 group-hover:opacity-100 transition-opacity duration-300 hidden sm:block">点击查看详情</div>
                </div>
            </div>
            <div class="stats-card clickable-card group bg-white rounded-lg sm:rounded-xl lg:rounded-2xl p-3 sm:p-6 lg:p-8 shadow-lg hover:shadow-2xl border border-blue-100 hover:border-blue-300 transition-all duration-300 cursor-pointer transform hover:-translate-y-2" id="countryStatsCard" title="点击查看所有国家">
                <div class="text-center space-y-1 sm:space-y-3">
                    <div class="text-xl sm:text-3xl lg:text-4xl group-hover:scale-110 transition-transform duration-300">🌍</div>
                    <div class="text-lg sm:text-2xl lg:text-3xl font-bold text-blue-600 group-hover:text-blue-700" id="countryCount">0</div>
                    <div class="text-gray-600 text-xs sm:text-sm lg:text-base font-medium">个国家</div>
                    <div class="click-hint text-xs lg:text-sm text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity duration-300 hidden sm:block">点击查看详情</div>
                </div>
            </div>
            <div class="stats-card clickable-card group bg-white rounded-lg sm:rounded-xl lg:rounded-2xl p-3 sm:p-6 lg:p-8 shadow-lg hover:shadow-2xl border border-purple-100 hover:border-purple-300 transition-all duration-300 cursor-pointer transform hover:-translate-y-2" id="memoryStatsCard" title="点击查看所有回忆">
                <div class="text-center space-y-1 sm:space-y-3">
                    <div class="text-xl sm:text-3xl lg:text-4xl group-hover:scale-110 transition-transform duration-300">💕</div>
                    <div class="text-lg sm:text-2xl lg:text-3xl font-bold text-purple-600 group-hover:text-purple-700" id="memoryCount">0</div>
                    <div class="text-gray-600 text-xs sm:text-sm lg:text-base font-medium">个回忆</div>
                    <div class="click-hint text-xs lg:text-sm text-purple-500 opacity-0 group-hover:opacity-100 transition-opacity duration-300 hidden sm:block">点击查看详情</div>
                </div>
            </div>
        </div>

        <!-- 时间线卡片区域 -->
        <div class="mt-12 lg:mt-16">
            <div class="text-center mb-8 lg:mb-12">
                <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-blue-500 to-purple-500 mb-4 lg:mb-6">
                    🌸 我们的甜蜜时光 🌸
                </h2>
                <p class="text-gray-600 text-lg lg:text-xl max-w-2xl mx-auto">记录每一个美好瞬间</p>
            </div>

            <!-- 时间线控制面板 -->
            <div class="timeline-controls mb-8 lg:mb-12 max-w-6xl mx-auto px-4">
                <!-- 主控制面板 -->
                <div class="bg-white/90 backdrop-blur-xl rounded-3xl p-6 lg:p-8 shadow-2xl border border-white/20 space-y-6">
                    <!-- 搜索区域 -->
                    <div class="search-section">
                        <div class="relative group">
                            <!-- 搜索图标 -->
                            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                <svg class="h-5 w-5 text-gray-400 group-focus-within:text-pink-500 transition-colors duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                                </svg>
                            </div>
                            <!-- 搜索输入框 -->
                            <input type="text" id="timelineSearch" 
                                   placeholder="🔍 搜索城市、故事或标签..." 
                                   class="w-full pl-12 pr-12 py-4 lg:py-5 text-gray-700 placeholder-gray-400 bg-gray-50/80 border-2 border-gray-200/50 rounded-2xl focus:bg-white focus:border-pink-400 focus:ring-4 focus:ring-pink-100 transition-all duration-300 text-base lg:text-lg font-medium shadow-inner">
                            <!-- 清除按钮 -->
                            <button id="clearSearch" 
                                    class="absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-pink-500 transition-colors duration-200 opacity-0 invisible" 
                                    style="display: none;">
                                <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <!-- 筛选标签区域 -->
                    <div class="filter-section">
                        <div class="flex flex-wrap gap-3 justify-center">
                            <!-- 全部筛选 -->
                            <button class="filter-btn active group relative overflow-hidden px-6 py-3 lg:px-8 lg:py-4 rounded-2xl bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 text-white font-semibold text-sm lg:text-base shadow-lg hover:shadow-xl transform hover:-translate-y-1 hover:scale-105 transition-all duration-300" data-filter="all">
                                <span class="relative z-10 flex items-center gap-2">
                                    <span class="text-lg">🌍</span>
                                    <span>全部回忆</span>
                                </span>
                                <div class="absolute inset-0 bg-gradient-to-r from-pink-600 via-purple-600 to-indigo-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                            </button>
                            
                            <!-- 年份筛选 -->
                            <button class="filter-btn group relative overflow-hidden px-6 py-3 lg:px-8 lg:py-4 rounded-2xl bg-white/80 backdrop-blur-sm border-2 border-gray-200/60 text-gray-600 font-semibold text-sm lg:text-base hover:border-pink-300 hover:text-pink-600 hover:bg-pink-50/80 hover:shadow-lg transform hover:-translate-y-1 hover:scale-105 transition-all duration-300" data-filter="2024">
                                <span class="flex items-center gap-2">
                                    <span class="text-lg">📅</span>
                                    <span>2024年</span>
                                </span>
                            </button>
                            
                            <button class="filter-btn group relative overflow-hidden px-6 py-3 lg:px-8 lg:py-4 rounded-2xl bg-white/80 backdrop-blur-sm border-2 border-gray-200/60 text-gray-600 font-semibold text-sm lg:text-base hover:border-pink-300 hover:text-pink-600 hover:bg-pink-50/80 hover:shadow-lg transform hover:-translate-y-1 hover:scale-105 transition-all duration-300" data-filter="2023">
                                <span class="flex items-center gap-2">
                                    <span class="text-lg">📅</span>
                                    <span>2023年</span>
                                </span>
                            </button>
                            
                            <!-- 主题筛选 -->
                            <button class="filter-btn group relative overflow-hidden px-6 py-3 lg:px-8 lg:py-4 rounded-2xl bg-white/80 backdrop-blur-sm border-2 border-gray-200/60 text-gray-600 font-semibold text-sm lg:text-base hover:border-rose-300 hover:text-rose-600 hover:bg-rose-50/80 hover:shadow-lg transform hover:-translate-y-1 hover:scale-105 transition-all duration-300" data-filter="romantic">
                                <span class="flex items-center gap-2">
                                    <span class="text-lg">💕</span>
                                    <span>浪漫时光</span>
                                </span>
                            </button>
                            
                            <button class="filter-btn group relative overflow-hidden px-6 py-3 lg:px-8 lg:py-4 rounded-2xl bg-white/80 backdrop-blur-sm border-2 border-gray-200/60 text-gray-600 font-semibold text-sm lg:text-base hover:border-purple-300 hover:text-purple-600 hover:bg-purple-50/80 hover:shadow-lg transform hover:-translate-y-1 hover:scale-105 transition-all duration-300" data-filter="culture">
                                <span class="flex items-center gap-2">
                                    <span class="text-lg">🎭</span>
                                    <span>文化探索</span>
                                </span>
                            </button>
                            
                            <button class="filter-btn group relative overflow-hidden px-6 py-3 lg:px-8 lg:py-4 rounded-2xl bg-white/80 backdrop-blur-sm border-2 border-gray-200/60 text-gray-600 font-semibold text-sm lg:text-base hover:border-orange-300 hover:text-orange-600 hover:bg-orange-50/80 hover:shadow-lg transform hover:-translate-y-1 hover:scale-105 transition-all duration-300" data-filter="food">
                                <span class="flex items-center gap-2">
                                    <span class="text-lg">🍜</span>
                                    <span>美食之旅</span>
                                </span>
                            </button>
                        </div>
                    </div>

                    <!-- 控制工具栏 -->
                    <div class="control-toolbar flex flex-col sm:flex-row gap-4 lg:gap-6 items-center justify-between pt-4 border-t border-gray-200/50">
                        <!-- 排序控制 -->
                        <div class="sort-control group">
                            <div class="relative">
                                <select id="timelineSort" class="appearance-none bg-white/80 backdrop-blur-sm border-2 border-gray-200/60 rounded-xl px-4 py-3 lg:px-6 lg:py-3 pr-10 text-gray-600 font-medium text-sm lg:text-base focus:border-pink-400 focus:ring-4 focus:ring-pink-100 transition-all duration-300 cursor-pointer hover:border-pink-300 hover:bg-pink-50/50">
                                    <option value="newest">⏰ 最新优先</option>
                                    <option value="oldest">📅 最早优先</option>
                                    <option value="alphabetical">🔤 按城市排序</option>
                                </select>
                                <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                                    <svg class="h-4 w-4 text-gray-400 group-hover:text-pink-500 transition-colors duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                </div>
                            </div>
                        </div>

                        <!-- 视图切换 -->
                        <div class="view-toggle-container">
                            <div class="flex items-center gap-1 bg-gray-100/80 backdrop-blur-sm rounded-xl p-1.5 border border-gray-200/50">
                                <button class="view-btn active group relative px-4 py-2.5 rounded-lg bg-white shadow-sm text-gray-700 hover:text-pink-600 transition-all duration-300 hover:shadow-md" data-view="timeline" title="时间线视图">
                                    <span class="text-lg group-hover:scale-110 transition-transform duration-200">📋</span>
                                </button>
                                <button class="view-btn group relative px-4 py-2.5 rounded-lg text-gray-500 hover:bg-white hover:shadow-sm hover:text-pink-600 transition-all duration-300" data-view="grid" title="网格视图">
                                    <span class="text-lg group-hover:scale-110 transition-transform duration-200">⊞</span>
                                </button>
                                <button class="view-btn group relative px-4 py-2.5 rounded-lg text-gray-500 hover:bg-white hover:shadow-sm hover:text-pink-600 transition-all duration-300" data-view="compact" title="紧凑视图">
                                    <span class="text-lg group-hover:scale-110 transition-transform duration-200">☰</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 筛选结果提示 -->
                <div id="filterResults" class="filter-results mt-6 p-4 lg:p-5 bg-gradient-to-r from-pink-50 via-purple-50 to-indigo-50 border border-pink-200/60 rounded-2xl flex items-center justify-between shadow-lg backdrop-blur-sm" style="display: none;">
                    <div class="flex items-center gap-3">
                        <div class="w-8 h-8 bg-gradient-to-r from-pink-500 to-purple-500 rounded-full flex items-center justify-center">
                            <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z"></path>
                            </svg>
                        </div>
                        <span class="results-text text-gray-700 font-semibold text-sm lg:text-base"></span>
                    </div>
                    <button id="clearFilters" class="clear-filters group relative overflow-hidden px-4 py-2 lg:px-6 lg:py-2.5 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl hover:from-pink-600 hover:to-purple-600 transition-all duration-300 text-sm font-semibold shadow-lg hover:shadow-xl transform hover:-translate-y-0.5">
                        <span class="relative z-10">✨ 清除筛选</span>
                    </button>
                </div>
            </div>
            
            <!-- 时间线容器 -->
            <div id="timeline" class="timeline-container" data-view="timeline">
                <!-- 时间线将通过JavaScript动态生成 -->
            </div>

            <!-- 空状态提示 -->
            <div id="emptyState" class="empty-state" style="display: none;">
                <div class="empty-icon">🔍</div>
                <h3 class="empty-title">没有找到匹配的回忆</h3>
                <p class="empty-description">试试调整搜索条件或筛选器</p>
                <button id="resetFilters" class="reset-btn">重置筛选</button>
            </div>
        </div>
    </main>



    <!-- 卡片详情弹框 -->
    <div id="cardModal" class="fixed inset-0 z-50 hidden bg-black/80 backdrop-blur-sm transition-all duration-300 ease-out" onclick="closeCardModal()">
        <div class="flex min-h-full items-center justify-center p-4 sm:p-6 lg:p-8">
            <div class="relative w-full max-w-4xl max-h-[90vh] bg-white rounded-3xl shadow-2xl overflow-hidden transform transition-all duration-300 ease-out scale-95 opacity-0" onclick="event.stopPropagation()" id="cardModalContent">
                <!-- 关闭按钮 -->
                <button onclick="closeCardModal()" class="absolute top-4 right-4 z-50 w-10 h-10 bg-white/90 hover:bg-white rounded-full shadow-lg flex items-center justify-center text-gray-500 hover:text-gray-700 transition-all duration-200 hover:scale-110 backdrop-blur-sm">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>

                <!-- 滚动容器 -->
                <div class="overflow-y-auto max-h-[90vh] custom-scrollbar">
                    <!-- 头部区域 -->
                    <div class="relative bg-gradient-to-br from-pink-50 via-blue-50 to-purple-50 p-6 sm:p-8 pr-16 sm:pr-20">
                        <!-- 装饰性背景 -->
                        <div class="absolute inset-0 bg-gradient-to-r from-pink-100/50 via-blue-100/50 to-purple-100/50"></div>
                        <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-pink-200/30 to-transparent rounded-bl-full"></div>
                        <div class="absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-blue-200/30 to-transparent rounded-tr-full"></div>
                        
                        <div class="relative z-10">
                            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
                                <div class="flex-1">
                                    <h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-800 mb-2" id="cardModalTitle"></h2>
                                    <div class="flex items-center gap-2">
                                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gradient-to-r from-pink-500 to-purple-500 text-white shadow-lg" id="cardModalDate"></span>
                                    </div>
                                </div>
                                <div class="flex items-center gap-2 text-gray-500">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                    </svg>
                                    <span class="text-sm font-medium">甜蜜回忆</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 照片区域 -->
                    <div class="p-6 sm:p-8" id="cardModalPhotos">
                        <!-- 照片网格将通过JavaScript动态生成 -->
                    </div>

                    <!-- 故事内容区域 -->
                    <div class="px-6 sm:px-8 pb-6" id="cardModalStoryContainer">
                        <div class="bg-gradient-to-r from-pink-50 via-blue-50 to-purple-50 rounded-2xl p-6 border border-pink-100 shadow-sm">
                            <div class="flex items-center gap-3 mb-4">
                                <div class="w-8 h-8 bg-gradient-to-r from-pink-500 to-purple-500 rounded-full flex items-center justify-center">
                                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                                    </svg>
                                </div>
                                <h3 class="text-lg font-semibold text-gray-800">我们的故事</h3>
                            </div>
                            <div class="text-gray-700 leading-relaxed" id="cardModalStory">
                                <!-- 故事内容将通过JavaScript动态生成 -->
                            </div>
                        </div>
                    </div>

                    <!-- 标签区域 -->
                    <div class="px-6 sm:px-8 pb-8" id="cardModalTagsContainer">
                        <div class="flex items-center gap-3 mb-4">
                            <div class="w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center">
                                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
                                </svg>
                            </div>
                            <h3 class="text-lg font-semibold text-gray-800">回忆标签</h3>
                        </div>
                        <div class="flex flex-wrap gap-2" id="cardModalTags">
                            <!-- 标签将通过JavaScript动态生成 -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 照片查看器模态框 -->
    <div id="photoModal" class="photo-modal">
        <span class="photo-modal-close">&times;</span>
        <div class="photo-modal-content">
            <img id="modalPhoto" src="" alt="照片">
        </div>
    </div>

    <!-- 城市列表弹框 -->
    <div id="cityListModal" class="city-list-modal">
        <div class="city-list-modal-content" onclick="event.stopPropagation()">
            <div class="city-list-header">
                <h2 class="city-list-title" id="cityListTitle">🏙️ 我们去过的城市</h2>
                <span class="city-list-close">&times;</span>
            </div>
            <div class="city-list-stats">
                <div class="city-stat-item">
                    <span class="city-stat-icon">🌍</span>
                    <span class="city-stat-text">总共 <span id="totalCities">0</span> 个城市</span>
                </div>
                <div class="city-stat-item">
                    <span class="city-stat-icon">🗺️</span>
                    <span class="city-stat-text">跨越 <span id="totalCountries">0</span> 个国家</span>
                </div>
            </div>
            <div class="city-list-container" id="cityListContainer">
                <!-- 城市列表将通过JavaScript动态生成 -->
            </div>
        </div>
    </div>

    <!-- 国家列表弹框 -->
    <div id="countryListModal" class="country-list-modal">
        <div class="country-list-modal-content" onclick="event.stopPropagation()">
            <div class="country-list-header">
                <h2 class="country-list-title">🌍 我们去过的国家</h2>
                <span class="country-list-close">&times;</span>
            </div>
            <div class="country-list-stats">
                <div class="country-stat-item">
                    <span class="country-stat-icon">🗺️</span>
                    <span class="country-stat-text">总共 <span id="totalCountriesInModal">0</span> 个国家</span>
                </div>
                <div class="country-stat-item">
                    <span class="country-stat-icon">🏙️</span>
                    <span class="country-stat-text">包含 <span id="totalCitiesInModal">0</span> 个城市</span>
                </div>
            </div>
            <div class="country-list-container" id="countryListContainer">
                <!-- 国家列表将通过JavaScript动态生成 -->
            </div>
        </div>
    </div>

    <!-- 回忆列表弹框 -->
    <div id="memoryListModal" class="memory-list-modal">
        <div class="memory-list-modal-content" onclick="event.stopPropagation()">
            <div class="memory-list-header">
                <h2 class="memory-list-title">💕 我们的甜蜜回忆</h2>
                <span class="memory-list-close">&times;</span>
            </div>
            <div class="memory-list-stats">
                <div class="memory-stat-item">
                    <span class="memory-stat-icon">💝</span>
                    <span class="memory-stat-text">总共 <span id="totalMemories">0</span> 个回忆</span>
                </div>
                <div class="memory-stat-item">
                    <span class="memory-stat-icon">📸</span>
                    <span class="memory-stat-text">包含 <span id="totalPhotos">0</span> 张照片</span>
                </div>
            </div>
            <div class="memory-list-container" id="memoryListContainer">
                <!-- 回忆列表将通过JavaScript动态生成 -->
            </div>
        </div>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <!-- 自定义脚本 -->
    <script src="script.js"></script>
</body>
</html>